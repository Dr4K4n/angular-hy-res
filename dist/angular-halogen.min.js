/**
 * angular-halogen
 * @version v0.0.1 - 2014-08-04
 * @link https://github.com/petejohanson/angular-halogen
 * @author Pete Johanson <latexer@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-halogen",[]).factory("URITemplate",["$window",function(a){return a.URITemplate}]).provider("ahParser",function(){this.$get=["$http","$q","URITemplate",function(a,b,c){var d=function(d,e,f,g){this.embedded={},angular.extend(this,d),this.$link=function(a){return e.hasOwnProperty(a)?e[a]:null},this.$embedded=function(a){return this.embedded.hasOwnProperty(a)?this.embedded[a]:null},this.$follow=function(d,e){var f=this.$link(d);if(null===f)return b.reject("Link relation not found");var g=f.href;return f.templated&&(g=new c(g).expand(e.data)),a(angular.extend(e||{},{url:g}))};for(var h in f){var i=f[h];if(angular.isArray(i)){for(var j=[],k=0,l=i.length;l>k;++k)j.push(g.parse(i[k]));this.embedded[h]=j}else this.embedded[h]=g.parse(i)}},e=function(){this.parse=function(a){angular.isString(a)&&(a=JSON.parse(a));var b=a._links,c=a._embedded;return delete a._links,delete a._embedded,new d(a,b,c,this)}};return new e}]});