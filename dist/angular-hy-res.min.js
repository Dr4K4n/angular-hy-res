/**
 * angular-hy-res - Hypermedia client for AngularJS inspired by $resource
 * @version v0.0.6 - 2014-09-28
 * @link https://github.com/petejohanson/angular-hy-res
 * @author Pete Johanson <peter@peterjohanson.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";var WebLink=function(e,t,r,n){angular.extend(this,e),this.$$http=t,this.$$Resource=r,this.$$URITemplate=n};WebLink.prototype.follow=function(e){var t=this.href;this.templated&&(t=new this.$$URITemplate(t).expand(e.data)),e=e||{},e.headers=e.headers||{},this.type&&!e.headers.Accept&&(e.headers.Accept=this.type);var r=angular.extend(e||{},{url:t});return this.$$Resource.fromRequest(this.$$http(r))},angular.module("angular-hy-res",[]).factory("URITemplate",["$window",function(e){return e.URITemplate}]).constant("hrWebLink",WebLink).factory("hrLinkCollection",["$q",function(e){function t(){var e=Object.create(Array.prototype);return e=Array.apply(e,arguments)||e,t.injectClassMethods(e),e}return t.injectClassMethods=function(e){for(var r in t.prototype)t.prototype.hasOwnProperty(r)&&(e[r]=t.prototype[r]);return e},t.fromArray=function(e){return t.apply(null,e)},t.prototype={follow:function(t){var r=this.map(function(e){return e.follow(t)});return r.$promise=e.all(r.map(function(e){return e.$promise})),r.$resolved=!1,r.$promise.then(function(){r.$resolved=!0},function(e){r.$resolved=!0,r.$error=e}),r}},t}]).factory("hrWebLinkFactory",["hrWebLink","$http","URITemplate",function(e,t,r){return function(n,o){return new e(n,t,o,r)}}]).provider("hrResource",function(){this.extensions=[],this.$get=["$http","$q","URITemplate","$injector",function(e,t,r,n){var o=[];angular.forEach(this.extensions,function(e){o.push(n.get(e))});var i=function(){this.$resolved=!1,this.$error=null,this.$$links={},this.$$embedded={},this.$link=function(e){return this.$$links.hasOwnProperty(e)?this.$$links[e]:null},this.$embedded=function(e){return this.$$embedded.hasOwnProperty(e)?this.$$embedded[e]:null},this.$followLink=function(e,r){if(null===e)return null;if(angular.isFunction(e.follow))return e.follow(r);var n=new i;return n.$promise=t.when(e).then(function(e){return e.follow(r).$promise}).then(function(e){var t=n.$promise;return angular.copy(e,n),n.$promise=t,n}),n},this.$follow=function(e,t){var r=this.$embedded(e);return null!==r?r:this.$resolved?this.$followLink(this.$link(e),t):this.$followLink(this.$promise.then(function(t){return t.$link(e)}),t)}};return i.prototype.$$resolve=function(e,r){angular.extend(this,e),angular.forEach(o,function(n){n.applies(e,r)&&(angular.extend(this.$$links,n.linkParser(e,r,i)),angular.forEach(n.embeddedParser(e,r,i),function(e,n){if(angular.isArray(e)){var o=e.map(function(e){return i.embedded(e,r)});o.$promise=t.when(o),o.$resolved=!0,this.$$embedded[n]=o}else this.$$embedded[n]=i.embedded(e,r)},this))},this),this.$resolved=!0},i.embedded=function(e,r){var n=new i;n.$$resolve(e,r);var o=t.defer();return n.$promise=o.promise,o.resolve(n),n},i.fromRequest=function(e){var t=new i;return t.$promise=e.then(function(e){return t.$$resolve(e.data,e.headers),t},function(){}),t},i}]}).factory("hrRoot",["hrWebLink","hrResource","$http",function(e,t,r){return function(n,o){this.follow=function(){return new e({href:n},r,t).follow(o)}}}]);