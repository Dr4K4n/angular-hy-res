/**
 * angular-hyper-resource
 * @version v0.0.1 - 2014-08-26
 * @link https://github.com/petejohanson/angular-hyper-resource
 * @author Pete Johanson <latexer@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-hyper-resource",[]).factory("URITemplate",["$window",function(a){return a.URITemplate}]).provider("hrResource",function(){this.extensions=[],this.$get=["$http","$q","URITemplate","$injector",function(a,b,c,d){var e=[];angular.forEach(this.extensions,function(a){e.push(d.get(a))});var f=function(){this.$resolved=!1,this.$error=null,this.$$links={},this.$$embedded={},this.$$resolve=function(a,b){angular.extend(this,a);angular.forEach(e,function(c){c.applies(a,b)&&(angular.extend(this.$$links,c.linkParser(a,b)),angular.forEach(c.embeddedParser(a,b),function(a,c){this.$$embedded[c]=f.embedded(a,b)},this))},this),this.$resolved=!0},this.$link=function(a){return this.$$links.hasOwnProperty(a)?this.$$links[a]:null},this.$embedded=function(a){return this.$$embedded.hasOwnProperty(a)?this.$$embedded[a]:null},this.$follow=function(a){var b=this.$link(a);return null===b?null:f.get(b)}};f.embedded=function(a,c){var d=new f;d.$$resolve(a,c);var e=b.defer();return d.$promise=e.promise,e.resolve(d),d},f.get=function(b,c){var d=new f,e=b.href,g=angular.extend(c||{},{url:e});return d.$promise=a(g).then(function(a){return d.$$resolve(a.data,a.headers),d},function(){}),d};var g=function(a,b){return{get:function(){return f.get({href:a},b)}}};return g}]}),angular.module("angular-hyper-resource-hal",["angular-hyper-resource"]).service("hrHalExtension",function(){this.applies=function(a,b){return"application/hal+json"===b("Content-Type")},this.linkParser=function(a){return a._links},this.embeddedParser=function(a){return a._embedded}}).config(["hrResourceProvider",function(a){a.extensions.push("hrHalExtension")}]);